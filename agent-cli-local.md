---
layout: default
title: ローカルエージェントCLI活用術
---

# ローカルにエージェントCLI を入れるメリット

Gemini CLI（または同種のエージェントCLI、Claude CodeやCodex CLI等）を自分のPCに入れて使うと、WebやGUIのチャットでは面倒な作業が手元のファイルやコマンドを直接扱いながら一気に片付けられます。ここでは実例を元に、どんな場面で強力に効いてくるかを紹介します。

本ページの対象読者はローカルにGemini CLIやエージェントCLIをインストールできた方です。講義中よりも説明が省略されていたりする部分があるので、適宜調べながら読んでください。

注: 本資料中の `user>` は「エージェントへの入力例」を示す記法です。

## 何が嬉しいのか

様々なメリットがありますが、筆者が思う大きなメリットはこの2つです。

- 手元のファイルを横断的に扱える: ディレクトリをまたいで検索・集約・編集ができます。
- コマンドと連携: `git`、`gh`、`ffmpeg`など、ありとあらゆるコマンドを自然言語で呼び出しできます。引数が難しいコマンドも覚える必要なく実行できるのがメリットです。

---

## 例1: 自分のPCのテキストファイルの文章作成と校正

文章作成、校正においてはみなさんもChatGPTやGeminiを活用したことがあるかと思います。
Webブラウザから使用する分においても十分に便利ですが、以下のような悩みはないでしょうか。

- 手元のファイルの内容をコピーして貼り付け、またChatGPTが生成した内容をコピペするのが面倒くさい。
- 複数ファイルにまたがっている文書をまとめてCHatGPTに送るのが面倒くさい。

ローカルで動作するエージェントCLIによってこれらの悩みを解決できます。

実際に本資料の執筆や校正において、エージェントCLIを活用しています。以下に具体的なケースを示します。

本資料はMarkdownファイルで書かれており、以下のファイル構造をしています。

```bash
.
├── _config.yml
├── 01-introduction.md
├── 02-environment.md
├── 03-build-with-gemini.md
├── 04-deploy-github-pages.md
├── 05-style-and-js.md
├── 06-tips-and-tricks.md
├── agent-cli-local.md
├── images
│   ├── 3d.gif
│   ├── ... other images
├── index.md
├── local-setup.md
├── PR.md
└── README.md
```

これらのMarkdownの誤字脱字チェックを全てのファイルで行う場合も、つぎのような指示で行えます。


```bash
全てのMarkdownの誤字脱字をチェックして。
```

ここではGemini CLIではなく、Codex CLIに依頼してみました。

![Codex Proofread](./images/codex-proofread.png)

誤字の確認と表記揺れを指摘されたので、表記揺れをそのまま直してもらうように依頼しました。

![Codex Fixing](./images/codex-fixing.png)

このように、複数ファイルの文書校正や執筆において、エージェントCLIは非常に便利です。

## 重要なポイント

エージェントCLIで文書やプログラムを編集するときには必ずGit管理しましょう。勝手に意図しない部分を変更されたり、最悪の場合ファイル削除されたりすることもあります。
もし仮にそのような望まない動作をされても、Git管理していればすぐに元のバージョンにファイルを復元できます。重要なファイルをエージェントが編集する前に必ずGitなどでバージョン管理しましょう。

## 例2: 複雑なコマンドの実行

世の中に便利なコマンドラインツール（ターミナル上で実行するコマンド）は無数にありますが、それらのコマンドはしばし複雑です。

```bash
ffmpeg -i 3d.mov -filter_complex "[0:v]fps=15,scale=640:-1:flags=lanczos,split[a][b];[a]palettegen=stats_mode=full[p];[b]
[p]paletteuse=new=1:dither=bayer:bayer_scale=3" -loop 0 3d.gif
```

これは`ffmpeg`という動画や音声ファイルの編集をコマンドラインで行えるツールで、動画ファイル(3d.mov)を高品質なGIFファイルに変換するためのコマンドです。
しかし、こんなものは覚えていられません。

エージェントCLIを使えば、動画があるディレクトリでエージェントを起動し、`user> 3d.movをffmpeg使ってGIFにして`と言えば自動でコマンドを生成して処理してくれます。

ChatGPTに聞いてもコマンドを教えてもらうことはできますが、たとえばコマンド実行時にエラーが発生した時などはエラーメッセージをエージェントが読み込んで自動でコマンドを調整してくれたりします。何より、ターミナルから離れることなく作業を続けられるのは大きな強みです。

