---
layout: default
title: ローカルエージェントCLI活用術
---

# ローカルにエージェントCLIを入れるメリット

Gemini CLI（または同種のエージェントCLI、Claude CodeやCodex CLI等）を自分のPCに入れて使うと、WebやGUIのチャットでは面倒な作業も、手元のファイルやコマンドを直接扱いながら一気に片付けられます。ここでは実例を基に、どんな場面で真価を発揮するかを紹介します。

本ページの対象読者は、Gemini CLIなどのエージェントCLIをローカルにインストール済みの方です。講義中より説明が省略されている箇所もあるため、適宜調べながら読み進めてください。

注: 本資料中の `user>` は「エージェントへの入力例」を示す記法です。

## 何が嬉しいのか

さまざまなメリットがありますが、筆者が特に感じる大きな利点は次の2点です。

- 手元のファイルを横断的に扱える: ディレクトリをまたいで検索・集約・編集ができます。
- コマンドと連携: `git`、`gh`、`ffmpeg`など、ありとあらゆるコマンドを自然言語で呼び出せます。難解な引数も覚えずに実行できるのが利点です。

---

## 例1: PC上のテキストの作成・校正

文章の作成や校正では、みなさんもChatGPTやGeminiを活用したことがあるでしょう。
Webブラウザからの利用でも十分に便利ですが、次のような悩みはないでしょうか。

- 手元のファイル内容をコピー＆ペーストしたり、生成結果を貼り戻したりするのが手間。
- 複数ファイルにまたがる文書をまとめてChatGPTに送るのが手間。

ローカルで動作するエージェントCLIなら、これらの悩みを解消できます。

実際に本資料の執筆や校正でもエージェントCLIを活用しています。以下に具体的なケースを示します。

本資料はMarkdownファイルで書かれており、以下のファイル構造をしています。

```bash
.
├── _config.yml
├── 01-introduction.md
├── 02-environment.md
├── 03-build-with-gemini.md
├── 04-deploy-github-pages.md
├── 05-style-and-js.md
├── 06-tips-and-tricks.md
├── agent-cli-local.md
├── images
│   ├── 3d.gif
│   ├── ... other images
├── index.md
├── local-setup.md
├── PR.md
└── README.md
```

これらのMarkdown全ファイルで誤字脱字チェックを行う場合も、次のように指示できます。


```bash
すべてのMarkdownの誤字脱字をチェックして。
```

ここではGemini CLIではなく、Codex CLIに依頼してみました。

![Codex Proofread](./images/codex-proofread.png)

誤字の確認と表記揺れを指摘されたので、表記揺れをそのまま直してもらうように依頼しました。

![Codex Fixing](./images/codex-fixing.png)

このように、複数ファイルの文書校正や執筆において、エージェントCLIは非常に便利です。

### 重要なポイント

エージェントCLIで文書やプログラムを編集するときは、必ずGitで管理しましょう。意図しない変更が加えられたり、最悪の場合ファイルを削除されることもあります。
もしそうした望まない変更があっても、Gitで管理していればすぐに元のバージョンに復元できます。重要なファイルをエージェントが編集する前に、必ずバージョン管理しておきましょう。

## 例2: 複雑なコマンドの実行

世の中に便利なコマンドラインツール（ターミナルで実行するコマンド）は無数にありますが、それらのコマンドはしばしば複雑です。

```bash
ffmpeg -i 3d.mov -filter_complex "[0:v]fps=15,scale=640:-1:flags=lanczos,split[a][b];[a]palettegen=stats_mode=full[p];[b]
[p]paletteuse=new=1:dither=bayer:bayer_scale=3" -loop 0 3d.gif
```

これは`ffmpeg`という動画や音声ファイルの編集をコマンドラインで行えるツールで、動画ファイル(3d.mov)を高品質なGIFファイルに変換するためのコマンドです。
とはいえ、こんなコマンドは覚えられません。

エージェントCLIを使えば、動画があるディレクトリでエージェントを起動し、`user> 3d.movをffmpegを使ってGIFにして`と言えば、自動でコマンドを生成して処理してくれます。

ChatGPTに聞いてコマンドを教わることもできますが、実行時にエラーが発生した際には、エージェントがエラーメッセージを読み取り自動でコマンドを調整してくれます。何より、ターミナルから離れずに作業を続けられるのは大きな強みです。

